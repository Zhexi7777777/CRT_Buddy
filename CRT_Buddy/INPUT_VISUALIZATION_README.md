# CRT Buddy v6.0 - 输入可视化功能

## 🎮 新增功能

### ✨ 输入可视化系统

CRT Buddy v6.0 添加了完整的按键追踪和可视化功能！

#### 📊 功能特性

1. **实时按键显示**
   - 每次按键都会在CRT屏幕中央以大字体显示
   - 按键会有黄色发光效果
   - 渐隐动画（约3秒）

2. **按键历史记录**
   - 在屏幕底部显示最近按下的10个键
   - 旧按键会逐渐淡出
   - 实时滚动更新

3. **输入统计**
   - **按键计数**：显示总共按了多少个键
   - **打字速度**：实时计算 CPM (Characters Per Minute)
   - 显示在状态栏：`KEYS: X | SPEED: X CPM`

4. **粒子特效**
   - 每次按键都会产生彩色粒子效果
   - 粒子从吉祥物周围发射
   - 随机颜色（青色、洋红、黄色、绿色）

5. **视觉反馈**
   - CRT屏幕会有脉冲光效
   - 每按10个键，吉祥物会显示开心表情
   - 输入框有动态边框效果

6. **特殊键识别**
   - `SPACE` - 空格键
   - `ENTER` - 回车键
   - `⌫` - 退格键
   - `TAB` - 制表符
   - `SHIFT/CTRL/ALT` - 修饰键
   - 其他字母/数字都会以大写显示

## 🎨 使用方法

1. **启动程序**
   ```bash
   python main.py
   ```

2. **开始输入**
   - 点击文本框
   - 随便打字，看看效果！
   - 观察屏幕上的可视化效果

3. **观察效果**
   - 🔤 **中央显示** - 当前按键大字体显示
   - 📜 **底部历史** - 按键历史记录
   - 📊 **顶部统计** - 按键数和速度
   - ✨ **粒子特效** - 彩色粒子飞舞
   - 😊 **吉祥物反应** - 每10个键会微笑

## 🎯 技术实现

### 核心组件

1. **KeystrokeTextEdit** - 自定义文本编辑器
   - 继承 `QTextEdit`
   - 重写 `keyPressEvent`
   - 捕获所有按键事件

2. **按键追踪系统**
   - 使用 `deque` 存储历史（最多10个）
   - 实时计算打字速度
   - 粒子系统管理

3. **可视化渲染**
   - 自定义 `paintEvent`
   - 多层绘制系统
   - 平滑动画过渡

### 数据结构

```python
# 按键历史
key_history = deque(maxlen=10)

# 粒子系统
keystroke_particles = [{
    'x': float,      # X坐标
    'y': float,      # Y坐标
    'vx': float,     # X速度
    'vy': float,     # Y速度
    'life': int,     # 生命周期
    'color': QColor  # 颜色
}]

# 统计数据
total_keystrokes: int       # 总按键数
typing_speed: int           # CPM速度
keystroke_times: deque      # 时间戳队列
```

## 📈 性能优化

- 粒子自动清理（生命周期结束）
- 历史记录限制为10个
- 速度计算基于最近60次按键
- 动画帧率限制为20 FPS (50ms间隔)

## 🎨 自定义选项

你可以修改以下参数：

```python
# 在 init_keystroke_tracking() 中
self.key_history = deque(maxlen=10)  # 修改历史记录数量
self.keystroke_times = deque(maxlen=60)  # 修改速度计算窗口

# 在 on_keystroke() 中
if self.total_keystrokes % 10 == 0:  # 修改吉祥物反应频率

# 在粒子生成中
for _ in range(3):  # 修改每次按键的粒子数量
```

## 🐛 已知问题

- 目前暂无已知问题

## 🔮 未来改进

- [ ] 添加打字音效
- [ ] 添加按键热力图
- [ ] 添加打字准确率统计
- [ ] 添加自定义主题颜色
- [ ] 添加按键连击计数

## 📝 更新日志

### v6.0 (2025-11-18)
- ✨ 新增实时按键显示
- ✨ 新增按键历史记录
- ✨ 新增输入统计（按键数、速度）
- ✨ 新增粒子特效系统
- ✨ 新增视觉反馈效果
- 🎨 优化窗口布局（520x320）
- 🐛 修复模块导入问题

---

**享受打字的乐趣！** 🎮✨
